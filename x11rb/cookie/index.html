<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cookies are handles to future replies or errors from the X11 server."><title>x11rb::cookie - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="x11rb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../x11rb/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../x11rb/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module cookie</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">x11rb</a>::<wbr><a class="mod" href="#">cookie</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/x11rb/cookie.rs.html#1-406">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cookies are handles to future replies or errors from the X11 server.</p>
<p>When sending a request, you get back a cookie. There are different cookies for different
kinds of requests.</p>
<p>For requests without a reply, you get a <a href="struct.VoidCookie.html" title="struct x11rb::cookie::VoidCookie"><code>VoidCookie</code></a>. Requests with a reply are represented
by a <a href="struct.Cookie.html" title="struct x11rb::cookie::Cookie"><code>Cookie</code></a> or a <a href="struct.CookieWithFds.html" title="struct x11rb::cookie::CookieWithFds"><code>CookieWithFds</code></a> if the reply also contains file descriptors.
Additionally, there are two special cases for requests which generate more than one reply:
<a href="struct.ListFontsWithInfoCookie.html" title="struct x11rb::cookie::ListFontsWithInfoCookie"><code>ListFontsWithInfoCookie</code></a> and [<code>RecordEnableContextCookie</code>].</p>
<h2 id="handling-x11-errors"><a href="#handling-x11-errors">Handling X11 errors</a></h2>
<p>The X11 server can answer requests with an error packet for various reasons, e.g. because an
invalid window ID was given. There are three options what can be done with errors:</p>
<ul>
<li>Errors can appear as X11 events in <code>wait_for_event()</code> (in XCB, this is called “unchecked”)</li>
<li>Errors can be checked for locally after a request was sent (in XCB, this is called “checked”)</li>
<li>Errors can be completely ignored (the closest analog in XCB would be <code>xcb_discard_reply()</code>)</li>
</ul>
<p>There is an additional difference between requests with and without replies.</p>
<h3 id="requests-without-a-reply"><a href="#requests-without-a-reply">Requests without a reply</a></h3>
<p>For requests that do not have a reply, you get an instance of <code>VoidCookie</code> after sending the
request. The different behaviors can be achieved via interacting with this cookie as foolows:</p>
<div><table><thead><tr><th>What?</th><th>How?</th></tr></thead><tbody>
<tr><td>Treat as events</td><td>Just drop the cookie</td></tr>
<tr><td>Check locally</td><td><code>VoidCookie::check</code></td></tr>
<tr><td>Ignore</td><td><code>VoidCookie::ignore_error</code></td></tr>
</tbody></table>
</div><h3 id="requests-with-a-reply"><a href="#requests-with-a-reply">Requests with a reply</a></h3>
<p>For requests with a reply, an additional option is what should happen to the reply. You can get
the reply, but any errors are still treated as events. This allows to centralise X11 error
handling a bit in case you only want to log errors.</p>
<p>The following things can be done with the <code>Cookie</code> that you get after sending a request with an
error.</p>
<div><table><thead><tr><th>Reply</th><th>Errors locally/ignored</th><th>Errors as events</th></tr></thead><tbody>
<tr><td>Get</td><td><code>Cookie::reply</code></td><td><code>Cookie::reply_unchecked</code></td></tr>
<tr><td>Ignore</td><td><code>Cookie::discard_reply_and_errors</code></td><td>Just drop the cookie</td></tr>
</tbody></table>
</div></div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Cookie.html" title="struct x11rb::cookie::Cookie">Cookie</a></div><div class="desc docblock-short">A handle to a response from the X11 server.</div></li><li><div class="item-name"><a class="struct" href="struct.CookieWithFds.html" title="struct x11rb::cookie::CookieWithFds">CookieWithFds</a></div><div class="desc docblock-short">A handle to a response containing <code>RawFd</code> from the X11 server.</div></li><li><div class="item-name"><a class="struct" href="struct.ListFontsWithInfoCookie.html" title="struct x11rb::cookie::ListFontsWithInfoCookie">ListFontsWithInfoCookie</a></div><div class="desc docblock-short">A handle to the replies to a <code>ListFontsWithInfo</code> request.</div></li><li><div class="item-name"><a class="struct" href="struct.VoidCookie.html" title="struct x11rb::cookie::VoidCookie">VoidCookie</a></div><div class="desc docblock-short">A handle to a possible error from the X11 server.</div></li></ul></section></div></main></body></html>