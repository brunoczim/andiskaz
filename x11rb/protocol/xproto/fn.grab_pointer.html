<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Grab the pointer."><title>grab_pointer in x11rb::protocol::xproto - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="x11rb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../x11rb/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../x11rb/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In x11rb::protocol::xproto</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">x11rb</a>::<wbr><a href="../index.html">protocol</a>::<wbr><a href="index.html">xproto</a>::<wbr><a class="fn" href="#">grab_pointer</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/x11rb/protocol/xproto.rs.html#1108-1133">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn grab_pointer&lt;Conn, A, B, C, D&gt;(
    conn: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.reference.html">&amp;Conn</a>,
    owner_events: <a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.bool.html">bool</a>,
    grab_window: <a class="type" href="type.Window.html" title="type x11rb::protocol::xproto::Window">Window</a>,
    event_mask: A,
    pointer_mode: <a class="struct" href="struct.GrabMode.html" title="struct x11rb::protocol::xproto::GrabMode">GrabMode</a>,
    keyboard_mode: <a class="struct" href="struct.GrabMode.html" title="struct x11rb::protocol::xproto::GrabMode">GrabMode</a>,
    confine_to: B,
    cursor: C,
    time: D
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../cookie/struct.Cookie.html" title="struct x11rb::cookie::Cookie">Cookie</a>&lt;'_, Conn, <a class="struct" href="struct.GrabPointerReply.html" title="struct x11rb::protocol::xproto::GrabPointerReply">GrabPointerReply</a>&gt;, <a class="enum" href="../../errors/enum.ConnectionError.html" title="enum x11rb::errors::ConnectionError">ConnectionError</a>&gt;<span class="where fmt-newline">where
    Conn: <a class="trait" href="../../connection/trait.RequestConnection.html" title="trait x11rb::connection::RequestConnection">RequestConnection</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.73.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,
    A: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.73.0/std/primitive.u16.html">u16</a>&gt;,
    B: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="type" href="type.Window.html" title="type x11rb::protocol::xproto::Window">Window</a>&gt;,
    C: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="type" href="type.Cursor.html" title="type x11rb::protocol::xproto::Cursor">Cursor</a>&gt;,
    D: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="type" href="type.Timestamp.html" title="type x11rb::protocol::xproto::Timestamp">Timestamp</a>&gt;,</span></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Grab the pointer.</p>
<p>Actively grabs control of the pointer. Further pointer events are reported only to the grabbing client. Overrides any active pointer grab by this client.</p>
<h2 id="fields-1"><a href="#fields-1">Fields</a></h2>
<ul>
<li><code>event_mask</code> - Specifies which pointer events are reported to the client.</li>
</ul>
<p>TODO: which values?</p>
<ul>
<li><code>confine_to</code> - Specifies the window to confine the pointer in (the user will not be able to
move the pointer out of that window).</li>
</ul>
<p>The special value <code>XCB_NONE</code> means don’t confine the pointer.</p>
<ul>
<li><code>cursor</code> - Specifies the cursor that should be displayed or <code>XCB_NONE</code> to not change the
cursor.</li>
<li><code>owner_events</code> - If 1, the <code>grab_window</code> will still get the pointer events. If 0, events are not
reported to the <code>grab_window</code>.</li>
<li><code>grab_window</code> - Specifies the window on which the pointer should be grabbed.</li>
<li><code>time</code> - The time argument allows you to avoid certain circumstances that come up if
applications take a long time to respond or if there are long network delays.
Consider a situation where you have two applications, both of which normally
grab the pointer when clicked on. If both applications specify the timestamp
from the event, the second application may wake up faster and successfully grab
the pointer before the first application. The first application then will get
an indication that the other application grabbed the pointer before its request
was processed.</li>
</ul>
<p>The special value <code>XCB_CURRENT_TIME</code> will be replaced with the current server
time.</p>
<ul>
<li><code>pointer_mode</code> -</li>
<li><code>keyboard_mode</code> -</li>
</ul>
<h2 id="errors"><a href="#errors">Errors</a></h2>
<ul>
<li><code>Value</code> - TODO: reasons?</li>
<li><code>Window</code> - The specified <code>window</code> does not exist.</li>
</ul>
<h2 id="see"><a href="#see">See</a></h2>
<ul>
<li><code>GrabKeyboard</code>: request</li>
</ul>
<h2 id="example"><a href="#example">Example</a></h2><div class="example-wrap"><pre class="language-text"><code>/*
 * Grabs the pointer actively
 *
 */
void my_example(xcb_connection_t *conn, xcb_screen_t *screen, xcb_cursor_t cursor) {
    xcb_grab_pointer_cookie_t cookie;
    xcb_grab_pointer_reply_t *reply;

    cookie = xcb_grab_pointer(
        conn,
        false,               /* get all pointer events specified by the following mask */
        screen-&gt;root,        /* grab the root window */
        XCB_NONE,            /* which events to let through */
        XCB_GRAB_MODE_ASYNC, /* pointer events should continue as normal */
        XCB_GRAB_MODE_ASYNC, /* keyboard mode */
        XCB_NONE,            /* confine_to = in which window should the cursor stay */
        cursor,              /* we change the cursor to whatever the user wanted */
        XCB_CURRENT_TIME
    );

    if ((reply = xcb_grab_pointer_reply(conn, cookie, NULL))) {
        if (reply-&gt;status == XCB_GRAB_STATUS_SUCCESS)
            printf(&quot;successfully grabbed the pointer\\n&quot;);
        free(preply);
    }
}
</code></pre></div></div></details></section></div></main></body></html>