<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A simple logger to provide symantics similar to what is expected of most UNIX utilities by logging to stderr and the higher the verbosity the higher the log level. It supports the ability to provide timestamps at different granularities. As well as colorizing the different log levels."><meta name="keywords" content="rust, rustlang, rust-lang, stderrlog"><title>stderrlog - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../stderrlog/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate stderrlog</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.4.3</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all stderrlog's items</p></a><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="stderrlog" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">stderrlog</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/stderrlog/lib.rs.html#9-569" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A simple logger to provide symantics similar to what is expected
of most UNIX utilities by logging to stderr and the higher the
verbosity the higher the log level. It supports the
ability to provide timestamps at different granularities. As
well as colorizing the different log levels.</p>
<h3 id="simple-use-case" class="section-header"><a href="#simple-use-case">Simple Use Case</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">log</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">stderrlog</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="ident">stderrlog::new</span>().<span class="ident">module</span>(<span class="macro">module_path!</span>()).<span class="ident">init</span>().<span class="ident">unwrap</span>();

    <span class="macro">error!</span>(<span class="string">&quot;some failure&quot;</span>);

    <span class="comment">// ...</span>
}</code></pre></div>
<h2 id="structopt-example" class="section-header"><a href="#structopt-example">StructOpt Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">log</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">stderrlog</span>;
<span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">structopt</span>;

<span class="kw">use</span> <span class="ident">structopt::StructOpt</span>;

<span class="doccomment">/// A StructOpt example</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">StructOpt</span>, <span class="ident">Debug</span>)]</span>
<span class="attribute">#[<span class="ident">structopt</span>()]</span>
<span class="kw">struct</span> <span class="ident">Opt</span> {
    <span class="doccomment">/// Silence all output</span>
    <span class="attribute">#[<span class="ident">structopt</span>(<span class="ident">short</span> <span class="op">=</span> <span class="string">&quot;q&quot;</span>, <span class="ident">long</span> <span class="op">=</span> <span class="string">&quot;quiet&quot;</span>)]</span>
    <span class="ident">quiet</span>: <span class="ident">bool</span>,
    <span class="doccomment">/// Verbose mode (-v, -vv, -vvv, etc)</span>
    <span class="attribute">#[<span class="ident">structopt</span>(<span class="ident">short</span> <span class="op">=</span> <span class="string">&quot;v&quot;</span>, <span class="ident">long</span> <span class="op">=</span> <span class="string">&quot;verbose&quot;</span>, <span class="ident">parse</span>(<span class="ident">from_occurrences</span>))]</span>
    <span class="ident">verbose</span>: <span class="ident">usize</span>,
    <span class="doccomment">/// Timestamp (sec, ms, ns, none)</span>
    <span class="attribute">#[<span class="ident">structopt</span>(<span class="ident">short</span> <span class="op">=</span> <span class="string">&quot;t&quot;</span>, <span class="ident">long</span> <span class="op">=</span> <span class="string">&quot;timestamp&quot;</span>)]</span>
    <span class="ident">ts</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">stderrlog::Timestamp</span><span class="op">&gt;</span>,
}

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">opt</span> <span class="op">=</span> <span class="ident">Opt::from_args</span>();

    <span class="ident">stderrlog::new</span>()
        .<span class="ident">module</span>(<span class="macro">module_path!</span>())
        .<span class="ident">quiet</span>(<span class="ident">opt</span>.<span class="ident">quiet</span>)
        .<span class="ident">verbosity</span>(<span class="ident">opt</span>.<span class="ident">verbose</span>)
        .<span class="ident">timestamp</span>(<span class="ident">opt</span>.<span class="ident">ts</span>.<span class="ident">unwrap_or</span>(<span class="ident">stderrlog::Timestamp::Off</span>))
        .<span class="ident">init</span>()
        .<span class="ident">unwrap</span>();
    <span class="macro">trace!</span>(<span class="string">&quot;trace message&quot;</span>);
    <span class="macro">debug!</span>(<span class="string">&quot;debug message&quot;</span>);
    <span class="macro">info!</span>(<span class="string">&quot;info message&quot;</span>);
    <span class="macro">warn!</span>(<span class="string">&quot;warn message&quot;</span>);
    <span class="macro">error!</span>(<span class="string">&quot;error message&quot;</span>);
}</code></pre></div>
<h3 id="docopt-example" class="section-header"><a href="#docopt-example">docopt Example</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">docopt</span>;
<span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">log</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">rustc_serialize</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">stderrlog</span>;

<span class="kw">use</span> <span class="ident">docopt::Docopt</span>;

<span class="kw">const</span> <span class="ident">USAGE</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;
Usage: program [-q] [-v...]
&quot;</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">RustcDecodable</span>)]</span>
<span class="kw">struct</span> <span class="ident">Args</span> {
    <span class="ident">flag_q</span>: <span class="ident">bool</span>,
    <span class="ident">flag_v</span>: <span class="ident">usize</span>,
}

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">args</span>: <span class="ident">Args</span> <span class="op">=</span> <span class="ident">Docopt::new</span>(<span class="ident">USAGE</span>)
                            .<span class="ident">and_then</span>(<span class="op">|</span><span class="ident">d</span><span class="op">|</span> <span class="ident">d</span>.<span class="ident">decode</span>())
                            .<span class="ident">unwrap_or_else</span>(<span class="op">|</span><span class="ident">e</span><span class="op">|</span> <span class="ident">e</span>.<span class="ident">exit</span>());

    <span class="ident">stderrlog::new</span>()
            .<span class="ident">module</span>(<span class="macro">module_path!</span>())
            .<span class="ident">quiet</span>(<span class="ident">args</span>.<span class="ident">flag_q</span>)
            .<span class="ident">timestamp</span>(<span class="ident">stderrlog::Timestamp::Second</span>)
            .<span class="ident">verbosity</span>(<span class="ident">args</span>.<span class="ident">flag_v</span>)
            .<span class="ident">init</span>()
            .<span class="ident">unwrap</span>();
    <span class="macro">trace!</span>(<span class="string">&quot;trace message&quot;</span>);
    <span class="macro">debug!</span>(<span class="string">&quot;debug message&quot;</span>);
    <span class="macro">info!</span>(<span class="string">&quot;info message&quot;</span>);
    <span class="macro">warn!</span>(<span class="string">&quot;warn message&quot;</span>);
    <span class="macro">error!</span>(<span class="string">&quot;error message&quot;</span>);

    <span class="comment">// ...</span>
}</code></pre></div>
<h2 id="clap-example" class="section-header"><a href="#clap-example">clap Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">clap</span>;
<span class="attribute">#[<span class="ident">macro_use</span>]</span>
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">log</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">stderrlog</span>;

<span class="kw">use</span> <span class="ident">clap</span>::{<span class="ident">Arg</span>, <span class="ident">App</span>};
<span class="kw">use</span> <span class="ident">std::str::FromStr</span>;

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">App::new</span>(<span class="string">&quot;stderrlog example&quot;</span>)
        .<span class="ident">version</span>(<span class="macro">crate_version!</span>())
        .<span class="ident">arg</span>(<span class="ident">Arg::with_name</span>(<span class="string">&quot;verbosity&quot;</span>)
             .<span class="ident">short</span>(<span class="string">&quot;v&quot;</span>)
             .<span class="ident">multiple</span>(<span class="bool-val">true</span>)
             .<span class="ident">help</span>(<span class="string">&quot;Increase message verbosity&quot;</span>))
        .<span class="ident">arg</span>(<span class="ident">Arg::with_name</span>(<span class="string">&quot;quiet&quot;</span>)
             .<span class="ident">short</span>(<span class="string">&quot;q&quot;</span>)
             .<span class="ident">help</span>(<span class="string">&quot;Silence all output&quot;</span>))
        .<span class="ident">arg</span>(<span class="ident">Arg::with_name</span>(<span class="string">&quot;timestamp&quot;</span>)
             .<span class="ident">short</span>(<span class="string">&quot;t&quot;</span>)
             .<span class="ident">help</span>(<span class="string">&quot;prepend log lines with a timestamp&quot;</span>)
             .<span class="ident">takes_value</span>(<span class="bool-val">true</span>)
             .<span class="ident">possible_values</span>(<span class="kw-2">&amp;</span>[<span class="string">&quot;none&quot;</span>, <span class="string">&quot;sec&quot;</span>, <span class="string">&quot;ms&quot;</span>, <span class="string">&quot;ns&quot;</span>]))
        .<span class="ident">get_matches</span>();

    <span class="kw">let</span> <span class="ident">verbose</span> <span class="op">=</span> <span class="ident">m</span>.<span class="ident">occurrences_of</span>(<span class="string">&quot;verbosity&quot;</span>) <span class="kw">as</span> <span class="ident">usize</span>;
    <span class="kw">let</span> <span class="ident">quiet</span> <span class="op">=</span> <span class="ident">m</span>.<span class="ident">is_present</span>(<span class="string">&quot;quiet&quot;</span>);
    <span class="kw">let</span> <span class="ident">ts</span> <span class="op">=</span> <span class="ident">m</span>.<span class="ident">value_of</span>(<span class="string">&quot;timestamp&quot;</span>).<span class="ident">map</span>(<span class="op">|</span><span class="ident">v</span><span class="op">|</span> {
        <span class="ident">stderrlog::Timestamp::from_str</span>(<span class="ident">v</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span><span class="kw">_</span><span class="op">|</span> {
            <span class="ident">clap::Error</span> {
                <span class="ident">message</span>: <span class="string">&quot;invalid value for &#39;timestamp&#39;&quot;</span>.<span class="ident">into</span>(),
                <span class="ident">kind</span>: <span class="ident">clap::ErrorKind::InvalidValue</span>,
                <span class="ident">info</span>: <span class="prelude-val">None</span>,
            }.<span class="ident">exit</span>()
        })
    }).<span class="ident">unwrap_or</span>(<span class="ident">stderrlog::Timestamp::Off</span>);

    <span class="ident">stderrlog::new</span>()
        .<span class="ident">module</span>(<span class="macro">module_path!</span>())
        .<span class="ident">quiet</span>(<span class="ident">quiet</span>)
        .<span class="ident">verbosity</span>(<span class="ident">verbose</span>)
        .<span class="ident">timestamp</span>(<span class="ident">ts</span>)
        .<span class="ident">init</span>()
        .<span class="ident">unwrap</span>();
    <span class="macro">trace!</span>(<span class="string">&quot;trace message&quot;</span>);
    <span class="macro">debug!</span>(<span class="string">&quot;debug message&quot;</span>);
    <span class="macro">info!</span>(<span class="string">&quot;info message&quot;</span>);
    <span class="macro">warn!</span>(<span class="string">&quot;warn message&quot;</span>);
    <span class="macro">error!</span>(<span class="string">&quot;error message&quot;</span>);
}</code></pre></div>
<h4 id="log-compatibility" class="section-header"><a href="#log-compatibility"><code>log</code> Compatibility</a></h4>
<p>The 0.3.x versions of <code>stderrlog</code> aim to provide compatibility with
applications using <code>log</code> 0.3.x</p>
<h4 id="rust-compatibility" class="section-header"><a href="#rust-compatibility">Rust Compatibility</a></h4>
<p><code>stderrlog</code> is serious about backwards compat. <code>stderrlog</code>
pins the minimum required version of Rust in the CI build.
Bumping the minimum version of Rust is a minor breaking
change and requires a minor version to be bumped.</p>
<p>The minimum supported Rust version for this release is 1.16.0.</p>
<h4 id="module-level-logging" class="section-header"><a href="#module-level-logging">Module Level Logging</a></h4>
<p><code>stderrlog</code> has the ability to limit the components which can log.
Many crates use <a href="https://docs.rs/log/*/log/">log</a> but you may not
want their output in your application. For example
<a href="https://docs.rs/hyper/*/hyper/">hyper</a> makes heavy use of log but
when your application receives <code>-vvvvv</code> to enable the <code>trace!()</code>
messages you don’t want the output of <code>hyper</code>’s <code>trace!()</code> level.</p>
<p>To support this <code>stderrlog</code> includes a <code>module()</code> method allowing
you to specify the modules that are allowed to log. The examples
above use the <code>module_path!()</code> macro to enable logging only for
the binary itself but none of its dependencies. To enable logging
from extra crates just add another call to <code>module()</code> with the
name of the crate. To enable logging for only a module within
that crate specifiy <code>crate::module</code> to <code>module()</code>. crates and
modules will be named the same way would would include them in
source code with <code>use</code> (e.g. <code>some-crate</code> would be <code>some_crate</code>).</p>
<p>For a good example of how the module level logging works see the
<a href="https://github.com/cardoe/stderrlog-rs/tree/master/examples/large-example">large-example
crate</a>
under examples, you’ll want to run the
following binaries to see all the examples:</p>
<ul>
<li><code>cargo run --bin large-example --</code></li>
<li><code>cargo run --bin another --</code></li>
<li><code>cargo run --bin yet --</code></li>
</ul>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StdErrLog.html" title="stderrlog::StdErrLog struct">StdErrLog</a></div><div class="item-right docblock-short"><p>Data specific to this logger</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ColorChoice.html" title="stderrlog::ColorChoice enum">ColorChoice</a></div><div class="item-right docblock-short"><p>ColorChoice represents the color preferences of an end user.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Timestamp.html" title="stderrlog::Timestamp enum">Timestamp</a></div><div class="item-right docblock-short"><p>State of the timestampping in the logger.</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.new.html" title="stderrlog::new fn">new</a></div><div class="item-right docblock-short"><p>creates a new stderr logger</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="stderrlog" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>